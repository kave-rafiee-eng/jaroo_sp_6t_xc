文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次1


   1  0000              
   2  0000              message '****************************************************************'
   3  0000              message '*PROJECT NAME :MAIN PROGRAM V102                               *'
   4  0000              message '*     VERSION :V102                                            *'
   5  0000              message '* ICE VERSION :                                                *'
   6  0000              message '*      DATE   :20150317                                        *'
   7  0000              message '*      REMARK :V102 modify ESCpowerIDcheck2,PBP                *'
   8  0000              message '****************************************************************'
   9  0000                              ;=INCLUDE REFERENCE FILE
  10  0000                              INCLUDE MAIN_PROGRAM_V102.INC












  11  0000              
  12  0000                              ;-PUBLIC LABEL
  13  0000                              PUBLIC  _LOAD_TKS_GLOBE_VARIES
  14  0000                              PUBLIC  _LOAD_HXT_REFERENCE
  15  0000              
  16  0000              CALL_   MACRO   FUNCTION
  17  0000                      ifdef   FUNCTION
  18  0000                              ifdef   PBP
  19  0000                              MOV     A,bank FUNCTION
  20  0000                              MOV     PBP,A
  21  0000                              endif
  22  0000                              CALL    FUNCTION
  23  0000                      endif
  24  0000                              ENDM
  25  0000              
  26  0000              EXTEND_FUNCTION_INITIAL MACRO
  27  0000                              CALL_   EXTEND_FUNCTION_1A_INITIAL
  28  0000                              CALL_   EXTEND_FUNCTION_1B_INITIAL
  29  0000                              CALL_   EXTEND_FUNCTION_1C_INITIAL
  30  0000                              CALL_   EXTEND_FUNCTION_1D_INITIAL
  31  0000                              CALL_   EXTEND_FUNCTION_1E_INITIAL
  32  0000                              CALL_   EXTEND_FUNCTION_1F_INITIAL
  33  0000                              CALL_   EXTEND_FUNCTION_1G_INITIAL
  34  0000                              CALL_   EXTEND_FUNCTION_1H_INITIAL
  35  0000              
  36  0000                              CALL_   EXTEND_FUNCTION_2A_INITIAL
  37  0000                              CALL_   EXTEND_FUNCTION_2B_INITIAL
  38  0000                              CALL_   EXTEND_FUNCTION_2C_INITIAL
  39  0000                              CALL_   EXTEND_FUNCTION_2D_INITIAL
  40  0000                              CALL_   EXTEND_FUNCTION_2E_INITIAL
  41  0000                              CALL_   EXTEND_FUNCTION_2F_INITIAL
  42  0000                              CALL_   EXTEND_FUNCTION_2G_INITIAL
  43  0000                              CALL_   EXTEND_FUNCTION_2H_INITIAL
  44  0000                              ENDM
  45  0000              
  46  0000              EXTEND_FUNCTION MACRO
  47  0000                              CALL_   EXTEND_FUNCTION_1A
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次2

  48  0000                              CALL_   EXTEND_FUNCTION_1B
  49  0000                              CALL_   EXTEND_FUNCTION_1C
  50  0000                              CALL_   EXTEND_FUNCTION_1D
  51  0000                              CALL_   EXTEND_FUNCTION_1E
  52  0000                              CALL_   EXTEND_FUNCTION_1F
  53  0000                              CALL_   EXTEND_FUNCTION_1G
  54  0000                              CALL_   EXTEND_FUNCTION_1H
  55  0000              
  56  0000                              CALL_   EXTEND_FUNCTION_2A
  57  0000                              CALL_   EXTEND_FUNCTION_2B
  58  0000                              CALL_   EXTEND_FUNCTION_2C
  59  0000                              CALL_   EXTEND_FUNCTION_2D
  60  0000                              CALL_   EXTEND_FUNCTION_2E
  61  0000                              CALL_   EXTEND_FUNCTION_2F
  62  0000                              CALL_   EXTEND_FUNCTION_2G
  63  0000                              CALL_   EXTEND_FUNCTION_2H
  64  0000                              ENDM
  65  0000                              ;==============
  66  0000                              ;=DATA SETCTION
  67  0000                              ;==============
  68  0000              MAIN_DATA       .SECTION          'DATA'
  69  0000              
  70  0000              ifndef  ESCpowerIDcheck
  71  0000  0002[       POR_ID          DB      2 DUP(?)
            00
            ]
  72  0002              endif
  73  0002              
  74  0002              
  75  0002              
  76  0002                              ;==============
  77  0002                              ;=CODE SETCTION
  78  0002                              ;==============
  79  0000              PROGRAM_ENTRY   .SECTION  AT 000H 'CODE'
  80  0000                      ifdef   PBP
  81  0000                              CLR     PBP
  82  0000                              ifndef  ESCpowerIDcheck
  83  0000                              MOV     A,042H      ;ASCII = B
  84  0000                              endif
  85  0000                      else
  86  0000                              ;----------------
  87  0000                              ;-SET POR ID 1---
  88  0000                              ;----------------
  89  0000                              ifndef  ESCpowerIDcheck
  90  0000  0F42                        MOV     A,042H      ;ASCII = B
  91  0001  3A8A                        SNZ     TO
  92  0002  0080     R                  MOV     POR_ID[0],A
  93  0003                              endif
  94  0003                      endif
  95  0003  2800     R                  JMP     PROGRAM_RESET
  96  0004              
  97  0004                              ;==============
  98  0004                              ;=MAIN PROGRAM=
  99  0004                              ;==============
 100  0000              MAIN_PROGRAM    .SECTION          'CODE'
 101  0000              
 102  0000                              ;;***********************
 103  0000              PROGRAM_RESET:  ;;* PROGRAM ENTRY *******
 104  0000                              ;;***********************
 105  0000                      ifdef   PBP
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次3

 106  0000                              ifndef  ESCpowerIDcheck
 107  0000                              SNZ     TO
 108  0000                              MOV     POR_ID[0],A
 109  0000                              endif
 110  0000                      endif
 111  0000                              ;----------------
 112  0000                              ;-SET POR ID 2---
 113  0000                              ;----------------
 114  0000                      ifndef  ESCpowerIDcheck
 115  0000  0F53                        MOV     A,053H      ;ASCII = S
 116  0001  0080     R                  MOV     POR_ID[1],A
 117  0002                      endif
 118  0002              
 119  0002              
 120  0002                              ;---------------------
 121  0002                              ;-MCU HARDWARE INITIAL
 122  0002                              ;---------------------
 123  0002                              MCU_HARDWARE_INITIAL
 123  0002            1                 ifdef   _BS83A02A_
 123  0002            1                         MOV     A,00000011B
 123  0002            1                         MOV [0BH],A
 123  0002            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  0002            1                       ;;MOV     A,01010011B     ;500   MS
 123  0002            1                         MOV     A,01010010B     ;125   MS
 123  0002            1                         MOV [01AH],A
 123  0002            1                         ;-IF POWER SAVING MODE ENABLE
 123  0002            1                         if 0==1
 123  0002            1                         SZ [0AH].5
 123  0002            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  0002            1                         endif
 123  0002            1                         ;-CLEAR BANK0 060H~0FFH
 123  0002            1                         MOV     A,60H
 123  0002            1                         CALL    CLEAR_RAM
 123  0002            1                 endif
 123  0002            1                 ;--------------------------------
 123  0002            1                 ;-INITIAL FOR BS83A04A  ---------
 123  0002            1                 ;--------------------------------
 123  0002            1                 ifdef   _BS83A04A_
 123  0002            1                         MOV     A,00000011B
 123  0002            1                         MOV [0BH],A
 123  0002            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  0002            1                       ;;MOV     A,01010011B     ;500   MS
 123  0002            1                         MOV     A,01010010B     ;125   MS
 123  0002            1                         MOV [01AH],A
 123  0002            1                         ;-IF POWER SAVING MODE ENABLE
 123  0002            1                         if 0==1
 123  0002            1                         SZ [0AH].5
 123  0002            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  0002            1                         endif
 123  0002            1                         ;-CLEAR BANK0 060H~0FFH
 123  0002            1                         MOV     A,60H
 123  0002            1                         CALL    CLEAR_RAM
 123  0002            1                 endif
 123  0002            1 
 123  0002            1                 ;--------------------------------
 123  0002            1                 ;-INITIAL FOR BS83B04A  ---------
 123  0002            1                 ;--------------------------------
 123  0002            1                 ifdef   _BS83B04A_
 123  0002            1                         MOV     A,00000011B
 123  0002            1                         MOV [0BH],A
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次4

 123  0002            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  0002            1                       ;;MOV     A,01010011B     ;500   MS
 123  0002            1                         MOV     A,01010010B     ;125   MS
 123  0002            1                         MOV [01AH],A
 123  0002            1                         ;-IF POWER SAVING MODE ENABLE
 123  0002            1                         if 0==1
 123  0002            1                         SZ [0AH].5
 123  0002            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  0002            1                         endif
 123  0002            1                         ;-CLEAR BANK0 060H~0FFH
 123  0002            1                         MOV     A,60H
 123  0002            1                         CALL    CLEAR_RAM
 123  0002            1                 endif
 123  0002            1 
 123  0002            1                 ;--------------------------------
 123  0002            1                 ;-INITIAL FOR BS83B08A  ---------
 123  0002            1                 ;--------------------------------
 123  0002            1                 ifdef   _BS83B08A_
 123  0002            1                         ;-SET SYSTEM CLOCK
 123  0002  0F30      1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 123  0003  008C      1                         MOV [0CH],A
 123  0004            1                         ;--
 123  0004  0F03      1                         MOV     A,00000011B
 123  0005  008B      1                         MOV [0BH],A
 123  0006            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  0006            1                       ;;MOV     A,01010011B     ;500   MS
 123  0006  0F52      1                         MOV     A,01010010B     ;125   MS
 123  0007  009A      1                         MOV [01AH],A
 123  0008            1                         ;-IF POWER SAVING MODE ENABLE
 123  0008            1                         if 0==1
 123  0008            1                         SZ [0AH].5
 123  0008            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  0008            1                         endif
 123  0008            1                         ;-CLEAR BANK0 060H~0FFH
 123  0008  0F60      1                         MOV     A,60H
 123  0009  2000     R1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS83B12A  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS83B12A_
 123  000A            1                         ;-SET SYSTEM CLOCK
 123  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 123  000A            1                         MOV [0CH],A
 123  000A            1                         ;--
 123  000A            1                         MOV     A,00000011B
 123  000A            1                         MOV [0BH],A
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-CLEAR BANK1 080H~0FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次5

 123  000A            1                         MOV     A,80
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 060H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,60H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS83B16A  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS83B16A_
 123  000A            1                         ;-SET SYSTEM CLOCK
 123  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 123  000A            1                         MOV [0CH],A
 123  000A            1                         ;--
 123  000A            1                         MOV     A,00000011B
 123  000A            1                         MOV [0BH],A
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-CLEAR BANK1 080H~0FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 060H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,60H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS84B06A  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS84B06A_
 123  000A            1                         ;-SET SYSTEM CLOCK
 123  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 123  000A            1                         MOV [0CH],A
 123  000A            1                         ;--
 123  000A            1                         MOV     A,00000011B
 123  000A            1                         MOV [0BH],A
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-DISABLE ADC
 123  000A            1                         CLR     ACERL
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次6

 123  000A            1                         MOV     A,01100000B
 123  000A            1                         MOV     ADCR0,A
 123  000A            1                         CLR     ADCR1
 123  000A            1                         ;-CLEAR BANK1 080H~0FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 060H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,60H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS84B08A  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS84B08A_
 123  000A            1                         ;-SET SYSTEM CLOCK
 123  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 123  000A            1                         MOV [0CH],A
 123  000A            1                         ;--
 123  000A            1                         MOV     A,00000011B
 123  000A            1                         MOV [0BH],A
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-DISABLE ADC
 123  000A            1                         CLR     ACERL
 123  000A            1                         MOV     A,01100000B
 123  000A            1                         MOV     ADCR0,A
 123  000A            1                         CLR     ADCR1
 123  000A            1                         ;-CLEAR BANK1 080H~0FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 060H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,60H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS84C12A  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS84C12A_
 123  000A            1                         ;-SET SYSTEM CLOCK
 123  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 123  000A            1                         MOV [0CH],A
 123  000A            1                         ;--
 123  000A            1                         MOV     A,00000011B
 123  000A            1                         MOV [0BH],A
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次7

 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-DISABLE ADC
 123  000A            1                         CLR     ACERL
 123  000A            1                         MOV     A,01100000B
 123  000A            1                         MOV     ADCR0,A
 123  000A            1                         CLR     ADCR1
 123  000A            1                         ;-CLEAR BANK2 280H~2DFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 060H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,60H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS84C16A  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS84C16A_
 123  000A            1                         ;-SET SYSTEM CLOCK
 123  000A            1                         MOV     A,(( 0<<4)&00110000B)
 123  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 123  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 123  000A            1                         MOV     A,00000011B
 123  000A            1                         MOV [0BH],A
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-DISABLE ADC
 123  000A            1                         CLR     ACERL
 123  000A            1                         MOV     A,01100000B
 123  000A            1                         MOV     ADCR0,A
 123  000A            1                         CLR     ADCR1
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次8

 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS84D20A  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS84D20A_
 123  000A            1                         ;-SET SYSTEM CLOCK
 123  000A            1                         MOV     A,(( 0<<4)&00110000B)
 123  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 123  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 123  000A            1                         MOV     A,00000011B
 123  000A            1                         MOV [0BH],A
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-DISABLE ADC
 123  000A            1                         CLR     ACERL
 123  000A            1                         MOV     A,01100000B
 123  000A            1                         MOV     ADCR0,A
 123  000A            1                         CLR     ADCR1
 123  000A            1                         ;-CLEAR BANK5 580H~2FFH
 123  000A            1                         MOV     A,5
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK4 480H~2FFH
 123  000A            1                         MOV     A,4
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次9

 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS82B16   ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS82B16_
 123  000A            1                         ;-SET SYSTEM CLOCK
 123  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 123  000A            1                         MOV [0CH],A
 123  000A            1                         ;--
 123  000A            1                         MOV     A,00000011B
 123  000A            1                         MOV [0BH],A
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1 
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1 
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS82B12A  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS82B12A_
 123  000A            1                         ;-SET SYSTEM CLOCK
 123  000A            1                         MOV     A,(( 0<<4)&00110000B)
 123  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 123  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 123  000A            1                         MOV     A,00000011B
 123  000A            1                         MOV [0BH],A
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次10

 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS82C16A  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS82C16A_
 123  000A            1                         ;-SET SYSTEM CLOCK
 123  000A            1                         MOV     A,(( 0<<4)&00110000B)
 123  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 123  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 123  000A            1                         MOV     A,00000011B
 123  000A            1                         MOV [0BH],A
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次11

 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS82D20A  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS82D20A_
 123  000A            1                         ;-SET SYSTEM CLOCK
 123  000A            1                         MOV     A,(( 0<<4)&00110000B)
 123  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 123  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 123  000A            1                         MOV     A,00000011B
 123  000A            1                         MOV [0BH],A
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-CLEAR BANK5 580H~2FFH
 123  000A            1                         MOV     A,5
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK4 480H~2FFH
 123  000A            1                         MOV     A,4
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS45FH21  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS45FH21_
 123  000A            1 
 123  000A            1 
 123  000A            1                         ;CLR     SCC
 123  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 123  000A            1                         ANDM    A,SCC
 123  000A            1 
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次12

 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-CLEAR BANK7 780H~7FFH
 123  000A            1                         MOV     A,7
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK5 680H~6FFH
 123  000A            1                         MOV     A,6
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK5 580H~2FFH
 123  000A            1                         MOV     A,5
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK4 480H~2FFH
 123  000A            1                         MOV     A,4
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,60H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1               ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS66F340  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS66F340_
 123  000A            1 
 123  000A            1                         ;CLR     SCC
 123  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 123  000A            1                         ANDM    A,SCC
 123  000A            1 
 123  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次13

 123  000A            1                         MOV     HIRCC,A
 123  000A            1 
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1 
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS66F350  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS66F350_
 123  000A            1 
 123  000A            1                         ;CLR     SCC
 123  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 123  000A            1                         ANDM    A,SCC
 123  000A            1 
 123  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 123  000A            1                         MOV     HIRCC,A
 123  000A            1 
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1 
 123  000A            1                         ;-CLEAR BANK5 580H~2FFH
 123  000A            1                         MOV     A,5
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次14

 123  000A            1                         ;-CLEAR BANK4 480H~2FFH
 123  000A            1                         MOV     A,4
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,60H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS66F360  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS66F360_
 123  000A            1 
 123  000A            1                         ;CLR     SCC
 123  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 123  000A            1                         ANDM    A,SCC
 123  000A            1 
 123  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 123  000A            1                         MOV     HIRCC,A
 123  000A            1 
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-CLEAR BANK7 780H~7FFH
 123  000A            1                         MOV     A,7
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK5 680H~6FFH
 123  000A            1                         MOV     A,6
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK5 580H~2FFH
 123  000A            1                         MOV     A,5
 123  000A            1                         MOV [04H],A
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次15

 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK4 480H~2FFH
 123  000A            1                         MOV     A,4
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,60H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS67F340  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS67F340_
 123  000A            1 
 123  000A            1                         ;CLR     SCC
 123  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 123  000A            1                         ANDM    A,SCC
 123  000A            1 
 123  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 123  000A            1                         MOV     HIRCC,A
 123  000A            1 
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次16

 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,60H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS67F350  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS67F350_
 123  000A            1 
 123  000A            1                         ;CLR     SCC
 123  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 123  000A            1                         ANDM    A,SCC
 123  000A            1 
 123  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 123  000A            1                         MOV     HIRCC,A
 123  000A            1 
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-CLEAR BANK5 580H~2FFH
 123  000A            1                         MOV     A,5
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK4 480H~2FFH
 123  000A            1                         MOV     A,4
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,60H
 123  000A            1                         CALL    CLEAR_RAM
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次17

 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS67F360  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS67F360_
 123  000A            1 
 123  000A            1                         ;CLR     SCC
 123  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 123  000A            1                         ANDM    A,SCC
 123  000A            1 
 123  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 123  000A            1                         MOV     HIRCC,A
 123  000A            1 
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-CLEAR BANK7 780H~7FFH
 123  000A            1                         MOV     A,7
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK5 680H~6FFH
 123  000A            1                         MOV     A,6
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK5 580H~2FFH
 123  000A            1                         MOV     A,5
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK4 480H~2FFH
 123  000A            1                         MOV     A,4
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次18

 123  000A            1                         MOV     A,60H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS66FV340  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS66FV340_
 123  000A            1 
 123  000A            1                         ;CLR     SCC
 123  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 123  000A            1                         ANDM    A,SCC
 123  000A            1 
 123  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 123  000A            1                         MOV     HIRCC,A
 123  000A            1 
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;;;;;;-CLEAR BANK7 780H~7FFH
 123  000A            1                         ;;;;;MOV     A,7
 123  000A            1                         ;;;;;MOV     BP,A
 123  000A            1                         ;;;;;MOV     A,80H
 123  000A            1                         ;;;;;CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK5 680H~6FFH
 123  000A            1                         MOV     A,6
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK5 580H~2FFH
 123  000A            1                         MOV     A,5
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;;;;;;-CLEAR BANK4 480H~2FFH
 123  000A            1                         ;;;;;MOV     A,4
 123  000A            1                         ;;;;;MOV     BP,A
 123  000A            1                         ;;;;;MOV     A,80H
 123  000A            1                         ;;;;;CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次19

 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS66FV350  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS66FV350_
 123  000A            1 
 123  000A            1                         ;CLR     SCC
 123  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 123  000A            1                         ANDM    A,SCC
 123  000A            1 
 123  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 123  000A            1                         MOV     HIRCC,A
 123  000A            1 
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;;;;;;-CLEAR BANK7 780H~7FFH
 123  000A            1                         ;;;;;MOV     A,7
 123  000A            1                         ;;;;;MOV     BP,A
 123  000A            1                         ;;;;;MOV     A,80H
 123  000A            1                         ;;;;;CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK5 680H~6FFH
 123  000A            1                         MOV     A,6
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK5 580H~2FFH
 123  000A            1                         MOV     A,5
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK4 480H~2FFH
 123  000A            1                         MOV     A,4
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次20

 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS66FV360  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS66FV360_
 123  000A            1 
 123  000A            1                         ;CLR     SCC
 123  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 123  000A            1                         ANDM    A,SCC
 123  000A            1 
 123  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 123  000A            1                         MOV     HIRCC,A
 123  000A            1 
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-CLEAR BANK7 780H~7FFH
 123  000A            1                         MOV     A,7
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK5 680H~6FFH
 123  000A            1                         MOV     A,6
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK5 580H~2FFH
 123  000A            1                         MOV     A,5
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK4 480H~2FFH
 123  000A            1                         MOV     A,4
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次21

 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS86C16A  ---------
 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS86C16A_
 123  000A            1                         ;-SET SYSTEM CLOCK
 123  000A            1                         MOV     A,(( 0<<4)&00110000B)
 123  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 123  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 123  000A            1                         MOV     A,00000011B
 123  000A            1                         MOV [0BH],A
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-DISABLE ADC
 123  000A            1                         CLR     ACERL
 123  000A            1                         MOV     A,01100000B
 123  000A            1                         MOV     ADCR0,A
 123  000A            1                         CLR     ADCR1
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1                 ;--------------------------------
 123  000A            1                 ;-INITIAL FOR BS86D20A  ---------
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次22

 123  000A            1                 ;--------------------------------
 123  000A            1                 ifdef   _BS86D20A_
 123  000A            1                         ;-SET SYSTEM CLOCK
 123  000A            1                         MOV     A,(( 0<<4)&00110000B)
 123  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 123  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 123  000A            1                         MOV     A,00000011B
 123  000A            1                         MOV [0BH],A
 123  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 123  000A            1                       ;;MOV     A,01010011B     ;500   MS
 123  000A            1                         MOV     A,01010010B     ;125   MS
 123  000A            1                         MOV [01AH],A
 123  000A            1                         ;-IF POWER SAVING MODE ENABLE
 123  000A            1                         if 0==1
 123  000A            1                         SZ [0AH].5
 123  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 123  000A            1                         endif
 123  000A            1                         ;-DISABLE ADC
 123  000A            1                         CLR     ACERL
 123  000A            1                         MOV     A,01100000B
 123  000A            1                         MOV     ADCR0,A
 123  000A            1                         CLR     ADCR1
 123  000A            1                         ;-CLEAR BANK5 580H~2FFH
 123  000A            1                         MOV     A,5
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK4 480H~2FFH
 123  000A            1                         MOV     A,4
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK3 380H~2FFH
 123  000A            1                         MOV     A,3
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK2 280H~2FFH
 123  000A            1                         MOV     A,2
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK1 180H~1FFH
 123  000A            1                         MOV     A,1
 123  000A            1                         MOV [04H],A
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                         ;-CLEAR BANK0 080H~0FFH
 123  000A            1                         CLR [04H]
 123  000A            1                         MOV     A,80H
 123  000A            1                         CALL    CLEAR_RAM
 123  000A            1                 endif
 123  000A            1 
 123  000A            1 
 123  000A            1 
 123  000A            1 
 124  000A              
 125  000A                              ;------------------------------
 126  000A                              ;-LOAD LIBRARY OPTION/THRESHOLD
 127  000A                              ;------------------------------
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次23

 128  000A  2000     R                  CALL    _LOAD_TKS_GLOBE_VARIES
 129  000B              
 130  000B                              ;------------------------
 131  000B                              ;-EXTEND FUNCTION INITIAL
 132  000B                              ;------------------------
 133  000B                              EXTEND_FUNCTION_INITIAL
 133  000B            1                 CALL_   EXTEND_FUNCTION_1A_INITIAL
 133  000B            2         ifdef EXTEND_FUNCTION_1A_INITIAL
 133  000B            2                 ifdef   PBP
 133  000B            2                 MOV     A,bank _BS83B08A_LIBV413_INITIAL
 133  000B            2                 MOV     PBP,A
 133  000B            2                 endif
 133  000B  2000     E2                 CALL _BS83B08A_LIBV413_INITIAL
 133  000C            2         endif
 133  000C            1                 CALL_   EXTEND_FUNCTION_1B_INITIAL
 133  000C            2         ifdef EXTEND_FUNCTION_1B_INITIAL
 133  000C            2                 ifdef   PBP
 133  000C            2                 MOV     A,bank EXTEND_FUNCTION_1B_INITIAL
 133  000C            2                 MOV     PBP,A
 133  000C            2                 endif
 133  000C            2                 CALL EXTEND_FUNCTION_1B_INITIAL
 133  000C            2         endif
 133  000C            1                 CALL_   EXTEND_FUNCTION_1C_INITIAL
 133  000C            2         ifdef EXTEND_FUNCTION_1C_INITIAL
 133  000C            2                 ifdef   PBP
 133  000C            2                 MOV     A,bank EXTEND_FUNCTION_1C_INITIAL
 133  000C            2                 MOV     PBP,A
 133  000C            2                 endif
 133  000C            2                 CALL EXTEND_FUNCTION_1C_INITIAL
 133  000C            2         endif
 133  000C            1                 CALL_   EXTEND_FUNCTION_1D_INITIAL
 133  000C            2         ifdef EXTEND_FUNCTION_1D_INITIAL
 133  000C            2                 ifdef   PBP
 133  000C            2                 MOV     A,bank _USER_PROGRAM_INITIAL
 133  000C            2                 MOV     PBP,A
 133  000C            2                 endif
 133  000C  2000     E2                 CALL _USER_PROGRAM_INITIAL
 133  000D            2         endif
 133  000D            1                 CALL_   EXTEND_FUNCTION_1E_INITIAL
 133  000D            2         ifdef EXTEND_FUNCTION_1E_INITIAL
 133  000D            2                 ifdef   PBP
 133  000D            2                 MOV     A,bank EXTEND_FUNCTION_1E_INITIAL
 133  000D            2                 MOV     PBP,A
 133  000D            2                 endif
 133  000D            2                 CALL EXTEND_FUNCTION_1E_INITIAL
 133  000D            2         endif
 133  000D            1                 CALL_   EXTEND_FUNCTION_1F_INITIAL
 133  000D            2         ifdef EXTEND_FUNCTION_1F_INITIAL
 133  000D            2                 ifdef   PBP
 133  000D            2                 MOV     A,bank EXTEND_FUNCTION_1F_INITIAL
 133  000D            2                 MOV     PBP,A
 133  000D            2                 endif
 133  000D            2                 CALL EXTEND_FUNCTION_1F_INITIAL
 133  000D            2         endif
 133  000D            1                 CALL_   EXTEND_FUNCTION_1G_INITIAL
 133  000D            2         ifdef EXTEND_FUNCTION_1G_INITIAL
 133  000D            2                 ifdef   PBP
 133  000D            2                 MOV     A,bank EXTEND_FUNCTION_1G_INITIAL
 133  000D            2                 MOV     PBP,A
 133  000D            2                 endif
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次24

 133  000D            2                 CALL EXTEND_FUNCTION_1G_INITIAL
 133  000D            2         endif
 133  000D            1                 CALL_   EXTEND_FUNCTION_1H_INITIAL
 133  000D            2         ifdef EXTEND_FUNCTION_1H_INITIAL
 133  000D            2                 ifdef   PBP
 133  000D            2                 MOV     A,bank EXTEND_FUNCTION_1H_INITIAL
 133  000D            2                 MOV     PBP,A
 133  000D            2                 endif
 133  000D            2                 CALL EXTEND_FUNCTION_1H_INITIAL
 133  000D            2         endif
 133  000D            1 
 133  000D            1                 CALL_   EXTEND_FUNCTION_2A_INITIAL
 133  000D            2         ifdef EXTEND_FUNCTION_2A_INITIAL
 133  000D            2                 ifdef   PBP
 133  000D            2                 MOV     A,bank EXTEND_FUNCTION_2A_INITIAL
 133  000D            2                 MOV     PBP,A
 133  000D            2                 endif
 133  000D            2                 CALL EXTEND_FUNCTION_2A_INITIAL
 133  000D            2         endif
 133  000D            1                 CALL_   EXTEND_FUNCTION_2B_INITIAL
 133  000D            2         ifdef EXTEND_FUNCTION_2B_INITIAL
 133  000D            2                 ifdef   PBP
 133  000D            2                 MOV     A,bank EXTEND_FUNCTION_2B_INITIAL
 133  000D            2                 MOV     PBP,A
 133  000D            2                 endif
 133  000D            2                 CALL EXTEND_FUNCTION_2B_INITIAL
 133  000D            2         endif
 133  000D            1                 CALL_   EXTEND_FUNCTION_2C_INITIAL
 133  000D            2         ifdef EXTEND_FUNCTION_2C_INITIAL
 133  000D            2                 ifdef   PBP
 133  000D            2                 MOV     A,bank EXTEND_FUNCTION_2C_INITIAL
 133  000D            2                 MOV     PBP,A
 133  000D            2                 endif
 133  000D            2                 CALL EXTEND_FUNCTION_2C_INITIAL
 133  000D            2         endif
 133  000D            1                 CALL_   EXTEND_FUNCTION_2D_INITIAL
 133  000D            2         ifdef EXTEND_FUNCTION_2D_INITIAL
 133  000D            2                 ifdef   PBP
 133  000D            2                 MOV     A,bank EXTEND_FUNCTION_2D_INITIAL
 133  000D            2                 MOV     PBP,A
 133  000D            2                 endif
 133  000D            2                 CALL EXTEND_FUNCTION_2D_INITIAL
 133  000D            2         endif
 133  000D            1                 CALL_   EXTEND_FUNCTION_2E_INITIAL
 133  000D            2         ifdef EXTEND_FUNCTION_2E_INITIAL
 133  000D            2                 ifdef   PBP
 133  000D            2                 MOV     A,bank EXTEND_FUNCTION_2E_INITIAL
 133  000D            2                 MOV     PBP,A
 133  000D            2                 endif
 133  000D            2                 CALL EXTEND_FUNCTION_2E_INITIAL
 133  000D            2         endif
 133  000D            1                 CALL_   EXTEND_FUNCTION_2F_INITIAL
 133  000D            2         ifdef EXTEND_FUNCTION_2F_INITIAL
 133  000D            2                 ifdef   PBP
 133  000D            2                 MOV     A,bank EXTEND_FUNCTION_2F_INITIAL
 133  000D            2                 MOV     PBP,A
 133  000D            2                 endif
 133  000D            2                 CALL EXTEND_FUNCTION_2F_INITIAL
 133  000D            2         endif
 133  000D            1                 CALL_   EXTEND_FUNCTION_2G_INITIAL
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次25

 133  000D            2         ifdef EXTEND_FUNCTION_2G_INITIAL
 133  000D            2                 ifdef   PBP
 133  000D            2                 MOV     A,bank EXTEND_FUNCTION_2G_INITIAL
 133  000D            2                 MOV     PBP,A
 133  000D            2                 endif
 133  000D            2                 CALL EXTEND_FUNCTION_2G_INITIAL
 133  000D            2         endif
 133  000D            1                 CALL_   EXTEND_FUNCTION_2H_INITIAL
 133  000D            2         ifdef EXTEND_FUNCTION_2H_INITIAL
 133  000D            2                 ifdef   PBP
 133  000D            2                 MOV     A,bank EXTEND_FUNCTION_2H_INITIAL
 133  000D            2                 MOV     PBP,A
 133  000D            2                 endif
 133  000D            2                 CALL EXTEND_FUNCTION_2H_INITIAL
 133  000D            2         endif
 134  000D              
 135  000D                              ;;-----------------------
 136  000D              MAIN_LOOP:      ;;- MAIN PROGRAM LOOP ---
 137  000D                              ;;-----------------------
 138  000D  0001                        CLR     WDT
 139  000E  0001                        CLR     WDT1
 140  000F  0005                        CLR     WDT2
 141  0010              
 142  0010                              ;----------------
 143  0010                              ;-CHECK POR ID --
 144  0010                              ;----------------
 145  0010                      ifndef  ESCpowerIDcheck
 146  0010  0F42                        MOV     A,042H
 147  0011  0480     R                  XORM    A,POR_ID[0]
 148  0012  0F53                        MOV     A,053H
 149  0013  3D0A                        SZ      Z
 150  0014  0480     R                  XORM    A,POR_ID[1]
 151  0015  390A                        SNZ     Z
 152  0016  2800                        JMP     000H
 153  0017                      endif
 154  0017                              ;----------------------
 155  0017                              ;-RE INITIAL SYS. CLOCK
 156  0017                              ;----------------------
 157  0017                              RELOAD_SYS_CLOCK
 157  0017            1                 ifdef   _BS83A02A_
 157  0017            1                         MOV     A,00000011B
 157  0017            1                         MOV [0BH],A
 157  0017            1 
 157  0017            1                 endif
 157  0017            1 
 157  0017            1 
 157  0017            1                 ;--------------------------------
 157  0017            1                 ;-INITIAL FOR BS83A04A  ---------
 157  0017            1                 ;--------------------------------
 157  0017            1                 ifdef   _BS83A04A_
 157  0017            1                         MOV     A,00000011B
 157  0017            1                         MOV [0BH],A
 157  0017            1                 endif
 157  0017            1 
 157  0017            1                 ;--------------------------------
 157  0017            1                 ;-INITIAL FOR BS83B04A  ---------
 157  0017            1                 ;--------------------------------
 157  0017            1                 ifdef   _BS83B04A_
 157  0017            1                         MOV     A,00000011B
 157  0017            1                         MOV [0BH],A
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次26

 157  0017            1                 endif
 157  0017            1 
 157  0017            1                 ;--------------------------------
 157  0017            1                 ;-INITIAL FOR BS83B08A  ---------
 157  0017            1                 ;--------------------------------
 157  0017            1                 ifdef   _BS83B08A_
 157  0017            1                         ;-SET SYSTEM CLOCK
 157  0017  0F30      1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 157  0018  008C      1                         MOV [0CH],A
 157  0019            1                         ;--
 157  0019  0F03      1                         MOV     A,00000011B
 157  001A  008B      1                         MOV [0BH],A
 157  001B            1                 endif
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS83B12A  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS83B12A_
 157  001B            1                         ;-SET SYSTEM CLOCK
 157  001B            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 157  001B            1                         MOV [0CH],A
 157  001B            1                         ;--
 157  001B            1                         MOV     A,00000011B
 157  001B            1                         MOV [0BH],A
 157  001B            1                 endif
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS83B16A  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS83B16A_
 157  001B            1                         ;-SET SYSTEM CLOCK
 157  001B            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 157  001B            1                         MOV [0CH],A
 157  001B            1                         ;--
 157  001B            1                         MOV     A,00000011B
 157  001B            1                         MOV [0BH],A
 157  001B            1                 endif
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS84B06A  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS84B06A_
 157  001B            1                         ;-SET SYSTEM CLOCK
 157  001B            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 157  001B            1                       ;;MOV     A,(SystemClock<<4)&00110000B
 157  001B            1                         MOV [0CH],A
 157  001B            1                         ;--
 157  001B            1                         MOV     A,00000011B
 157  001B            1                         MOV [0BH],A
 157  001B            1                 endif
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS84B08A  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS84B08A_
 157  001B            1                         ;-SET SYSTEM CLOCK
 157  001B            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 157  001B            1                         MOV [0CH],A
 157  001B            1                         ;--
 157  001B            1                         MOV     A,00000011B
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次27

 157  001B            1                         MOV [0BH],A
 157  001B            1                 endif
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS84C12A  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS84C12A_
 157  001B            1                         ;-SET SYSTEM CLOCK
 157  001B            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 157  001B            1                         MOV [0CH],A
 157  001B            1                         ;--
 157  001B            1                         MOV     A,00000011B
 157  001B            1                         MOV [0BH],A
 157  001B            1                 endif
 157  001B            1 
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS84C16A  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS84C16A_
 157  001B            1                         ;-SET SYSTEM CLOCK
 157  001B            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 157  001B            1                         MOV [0CH],A          ;BIT7=FSYSON
 157  001B            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 157  001B            1                         MOV     A,00000011B
 157  001B            1                         MOV [0BH],A
 157  001B            1                 endif
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS84D20A  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS84D20A_
 157  001B            1                         ;-SET SYSTEM CLOCK
 157  001B            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 157  001B            1                         MOV [0CH],A          ;BIT7=FSYSON
 157  001B            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 157  001B            1                         MOV     A,00000011B
 157  001B            1                         MOV [0BH],A
 157  001B            1                 endif
 157  001B            1 
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS82B16   ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS82B16_
 157  001B            1                         ;-SET SYSTEM CLOCK
 157  001B            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 157  001B            1                         MOV [0CH],A
 157  001B            1                         ;--
 157  001B            1                         MOV     A,00000011B
 157  001B            1                         MOV [0BH],A
 157  001B            1                 endif
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS82B12A  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS82B12A_
 157  001B            1                         ;-SET SYSTEM CLOCK
 157  001B            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 157  001B            1                         MOV [0CH],A          ;BIT7=FSYSON
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次28

 157  001B            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 157  001B            1                         MOV     A,00000011B
 157  001B            1                         MOV [0BH],A
 157  001B            1                 endif
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS82C16A  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS82C16A_
 157  001B            1                         ;-SET SYSTEM CLOCK
 157  001B            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 157  001B            1                         MOV [0CH],A          ;BIT7=FSYSON
 157  001B            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 157  001B            1                         MOV     A,00000011B
 157  001B            1                         MOV [0BH],A
 157  001B            1                 endif
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS82D20A  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS82D20A_
 157  001B            1                         ;-SET SYSTEM CLOCK
 157  001B            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 157  001B            1                         MOV [0CH],A          ;BIT7=FSYSON
 157  001B            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 157  001B            1                         MOV     A,00000011B
 157  001B            1                         MOV [0BH],A
 157  001B            1                 endif
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS45FH21  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS45FH21_
 157  001B            1                         ;CLR     SCC             ;FH=Fsys/1
 157  001B            1                         MOV     A,00011111B
 157  001B            1                         ANDM    A,SCC
 157  001B            1                         SET     HIRCEN
 157  001B            1                 endif
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS66F340  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS66F340_
 157  001B            1                         ;CLR     SCC             ;FH=Fsys/1
 157  001B            1                         MOV     A,00011111B
 157  001B            1                         ANDM    A,SCC
 157  001B            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 157  001B            1                         MOV     HIRCC,A
 157  001B            1                 endif
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS66F350  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS66F350_
 157  001B            1                         ;CLR     SCC             ;FH=Fsys/1
 157  001B            1                         MOV     A,00011111B
 157  001B            1                         ANDM    A,SCC
 157  001B            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 157  001B            1                         MOV     HIRCC,A
 157  001B            1                 endif
 157  001B            1 
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次29

 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS66F360  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS66F360_
 157  001B            1                         ;CLR     SCC             ;FH=Fsys/1
 157  001B            1                         MOV     A,00011111B
 157  001B            1                         ANDM    A,SCC
 157  001B            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 157  001B            1                         MOV     HIRCC,A
 157  001B            1                 endif
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS67F340  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS67F340_
 157  001B            1                         ;CLR     SCC             ;FH=Fsys/1
 157  001B            1                         MOV     A,00011111B
 157  001B            1                         ANDM    A,SCC
 157  001B            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 157  001B            1                         MOV     HIRCC,A
 157  001B            1                 endif
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS67F350  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS67F350_
 157  001B            1                         ;CLR     SCC             ;FH=Fsys/1
 157  001B            1                         MOV     A,00011111B
 157  001B            1                         ANDM    A,SCC
 157  001B            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 157  001B            1                         MOV     HIRCC,A
 157  001B            1                 endif
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS67F360  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS67F360_
 157  001B            1                         ;CLR     SCC             ;FH=Fsys/1
 157  001B            1                         MOV     A,00011111B
 157  001B            1                         ANDM    A,SCC
 157  001B            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 157  001B            1                         MOV     HIRCC,A
 157  001B            1                 endif
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS66FV340  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS66FV340_
 157  001B            1                         MOV     A,00011111B     ;FH=Fsys/1
 157  001B            1                         ANDM    A,SCC
 157  001B            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 157  001B            1                         MOV     HIRCC,A
 157  001B            1                 endif
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS66FV350  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS66FV350_
 157  001B            1                         MOV     A,00011111B     ;FH=Fsys/1
 157  001B            1                         ANDM    A,SCC
 157  001B            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 157  001B            1                         MOV     HIRCC,A
 157  001B            1                 endif
 157  001B            1                 ;--------------------------------
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次30

 157  001B            1                 ;-INITIAL FOR BS66FV360  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS66FV360_
 157  001B            1                         MOV     A,00011111B     ;FH=Fsys/1
 157  001B            1                         ANDM    A,SCC
 157  001B            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 157  001B            1                         MOV     HIRCC,A
 157  001B            1                 endif
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS86C16A  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS86C16A_
 157  001B            1                         ;-SET SYSTEM CLOCK
 157  001B            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 157  001B            1                         MOV [0CH],A          ;BIT7=FSYSON
 157  001B            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 157  001B            1                         MOV     A,00000011B
 157  001B            1                         MOV [0BH],A
 157  001B            1                 endif
 157  001B            1 
 157  001B            1                 ;--------------------------------
 157  001B            1                 ;-INITIAL FOR BS86D20A  ---------
 157  001B            1                 ;--------------------------------
 157  001B            1                 ifdef   _BS86D20A_
 157  001B            1                         ;-SET SYSTEM CLOCK
 157  001B            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 157  001B            1                         MOV [0CH],A          ;BIT7=FSYSON
 157  001B            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 157  001B            1                         MOV     A,00000011B
 157  001B            1                         MOV [0BH],A
 157  001B            1                 endif
 157  001B            1 
 158  001B                              EXTEND_FUNCTION
 158  001B            1                 CALL_   EXTEND_FUNCTION_1A
 158  001B            2         ifdef EXTEND_FUNCTION_1A
 158  001B            2                 ifdef   PBP
 158  001B            2                 MOV     A,bank _BS83B08A_LIBV413
 158  001B            2                 MOV     PBP,A
 158  001B            2                 endif
 158  001B  2000     E2                 CALL _BS83B08A_LIBV413
 158  001C            2         endif
 158  001C            1                 CALL_   EXTEND_FUNCTION_1B
 158  001C            2         ifdef EXTEND_FUNCTION_1B
 158  001C            2                 ifdef   PBP
 158  001C            2                 MOV     A,bank EXTEND_FUNCTION_1B
 158  001C            2                 MOV     PBP,A
 158  001C            2                 endif
 158  001C            2                 CALL EXTEND_FUNCTION_1B
 158  001C            2         endif
 158  001C            1                 CALL_   EXTEND_FUNCTION_1C
 158  001C            2         ifdef EXTEND_FUNCTION_1C
 158  001C            2                 ifdef   PBP
 158  001C            2                 MOV     A,bank EXTEND_FUNCTION_1C
 158  001C            2                 MOV     PBP,A
 158  001C            2                 endif
 158  001C            2                 CALL EXTEND_FUNCTION_1C
 158  001C            2         endif
 158  001C            1                 CALL_   EXTEND_FUNCTION_1D
 158  001C            2         ifdef EXTEND_FUNCTION_1D
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次31

 158  001C            2                 ifdef   PBP
 158  001C            2                 MOV     A,bank _USER_PROGRAM
 158  001C            2                 MOV     PBP,A
 158  001C            2                 endif
 158  001C  2000     E2                 CALL _USER_PROGRAM
 158  001D            2         endif
 158  001D            1                 CALL_   EXTEND_FUNCTION_1E
 158  001D            2         ifdef EXTEND_FUNCTION_1E
 158  001D            2                 ifdef   PBP
 158  001D            2                 MOV     A,bank EXTEND_FUNCTION_1E
 158  001D            2                 MOV     PBP,A
 158  001D            2                 endif
 158  001D            2                 CALL EXTEND_FUNCTION_1E
 158  001D            2         endif
 158  001D            1                 CALL_   EXTEND_FUNCTION_1F
 158  001D            2         ifdef EXTEND_FUNCTION_1F
 158  001D            2                 ifdef   PBP
 158  001D            2                 MOV     A,bank EXTEND_FUNCTION_1F
 158  001D            2                 MOV     PBP,A
 158  001D            2                 endif
 158  001D            2                 CALL EXTEND_FUNCTION_1F
 158  001D            2         endif
 158  001D            1                 CALL_   EXTEND_FUNCTION_1G
 158  001D            2         ifdef EXTEND_FUNCTION_1G
 158  001D            2                 ifdef   PBP
 158  001D            2                 MOV     A,bank EXTEND_FUNCTION_1G
 158  001D            2                 MOV     PBP,A
 158  001D            2                 endif
 158  001D            2                 CALL EXTEND_FUNCTION_1G
 158  001D            2         endif
 158  001D            1                 CALL_   EXTEND_FUNCTION_1H
 158  001D            2         ifdef EXTEND_FUNCTION_1H
 158  001D            2                 ifdef   PBP
 158  001D            2                 MOV     A,bank EXTEND_FUNCTION_1H
 158  001D            2                 MOV     PBP,A
 158  001D            2                 endif
 158  001D            2                 CALL EXTEND_FUNCTION_1H
 158  001D            2         endif
 158  001D            1 
 158  001D            1                 CALL_   EXTEND_FUNCTION_2A
 158  001D            2         ifdef EXTEND_FUNCTION_2A
 158  001D            2                 ifdef   PBP
 158  001D            2                 MOV     A,bank EXTEND_FUNCTION_2A
 158  001D            2                 MOV     PBP,A
 158  001D            2                 endif
 158  001D            2                 CALL EXTEND_FUNCTION_2A
 158  001D            2         endif
 158  001D            1                 CALL_   EXTEND_FUNCTION_2B
 158  001D            2         ifdef EXTEND_FUNCTION_2B
 158  001D            2                 ifdef   PBP
 158  001D            2                 MOV     A,bank EXTEND_FUNCTION_2B
 158  001D            2                 MOV     PBP,A
 158  001D            2                 endif
 158  001D            2                 CALL EXTEND_FUNCTION_2B
 158  001D            2         endif
 158  001D            1                 CALL_   EXTEND_FUNCTION_2C
 158  001D            2         ifdef EXTEND_FUNCTION_2C
 158  001D            2                 ifdef   PBP
 158  001D            2                 MOV     A,bank EXTEND_FUNCTION_2C
 158  001D            2                 MOV     PBP,A
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次32

 158  001D            2                 endif
 158  001D            2                 CALL EXTEND_FUNCTION_2C
 158  001D            2         endif
 158  001D            1                 CALL_   EXTEND_FUNCTION_2D
 158  001D            2         ifdef EXTEND_FUNCTION_2D
 158  001D            2                 ifdef   PBP
 158  001D            2                 MOV     A,bank EXTEND_FUNCTION_2D
 158  001D            2                 MOV     PBP,A
 158  001D            2                 endif
 158  001D            2                 CALL EXTEND_FUNCTION_2D
 158  001D            2         endif
 158  001D            1                 CALL_   EXTEND_FUNCTION_2E
 158  001D            2         ifdef EXTEND_FUNCTION_2E
 158  001D            2                 ifdef   PBP
 158  001D            2                 MOV     A,bank EXTEND_FUNCTION_2E
 158  001D            2                 MOV     PBP,A
 158  001D            2                 endif
 158  001D            2                 CALL EXTEND_FUNCTION_2E
 158  001D            2         endif
 158  001D            1                 CALL_   EXTEND_FUNCTION_2F
 158  001D            2         ifdef EXTEND_FUNCTION_2F
 158  001D            2                 ifdef   PBP
 158  001D            2                 MOV     A,bank EXTEND_FUNCTION_2F
 158  001D            2                 MOV     PBP,A
 158  001D            2                 endif
 158  001D            2                 CALL EXTEND_FUNCTION_2F
 158  001D            2         endif
 158  001D            1                 CALL_   EXTEND_FUNCTION_2G
 158  001D            2         ifdef EXTEND_FUNCTION_2G
 158  001D            2                 ifdef   PBP
 158  001D            2                 MOV     A,bank EXTEND_FUNCTION_2G
 158  001D            2                 MOV     PBP,A
 158  001D            2                 endif
 158  001D            2                 CALL EXTEND_FUNCTION_2G
 158  001D            2         endif
 158  001D            1                 CALL_   EXTEND_FUNCTION_2H
 158  001D            2         ifdef EXTEND_FUNCTION_2H
 158  001D            2                 ifdef   PBP
 158  001D            2                 MOV     A,bank EXTEND_FUNCTION_2H
 158  001D            2                 MOV     PBP,A
 158  001D            2                 endif
 158  001D            2                 CALL EXTEND_FUNCTION_2H
 158  001D            2         endif
 159  001D                              ;----------------
 160  001D                              ;-SET POR ID  ---
 161  001D                              ;----------------
 162  001D                      ifndef  ESCpowerIDcheck
 163  001D  0F42                        MOV     A,042H      ;ASCII = B
 164  001E  0080     R                  MOV     POR_ID[0],A
 165  001F  0F53                        MOV     A,053H      ;ASCII = S
 166  0020  0080     R                  MOV     POR_ID[1],A
 167  0021                      endif
 168  0021              
 169  0021                              ;--------------------
 170  0021              WDT_WAKEUP:     ;-WDT WAKEUP FUNCTION
 171  0021                              ;--------------------
 172  0021                              if      PowerSave==1
 173  0021                              CALL_   _CHECK_KEY_WAKEUP
 174  0021                              endif
 175  0021              
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次33

 176  0021                              ifdef   PBP
 177  0021                              MOV     A,BANK MAIN_LOOP
 178  0021                              MOV     PBP,A
 179  0021                              endif
 180  0021  2800     R                  JMP     MAIN_LOOP
 181  0022              
 182  0022              
 183  0022              
 184  0022              
 185  0022              
 186  0022              
 187  0022              
 188  0022              
 189  0022              
 190  0022              ;;***********************************************************
 191  0022              ;;*SUB. NAME:                                               *
 192  0022              ;;*INPUT    :                                               *
 193  0022              ;;*OUTPUT   :                                               *
 194  0022              ;;*USED REG.:                                               *
 195  0022              ;;*FUNCTION :                                               *
 196  0022              ;;***********************************************************
 197  0022              CLEAR_RAM:
 198  0022  0083                        MOV     MP1,A
 199  0023                      ifndef  ESCpowerIDcheck
 200  0023                          ifdef  BP
 201  0023                              ;-CHECK BANK
 202  0023  1084                        SZ      BP
 203  0024  2800     R                  JMP     CLR_RAM
 204  0025                          endif
 205  0025                              ;-CHECK POR_ID RAM
 206  0025  0F00     R                  MOV     A,OFFSET POR_ID
 207  0026  0403                        XOR     A,MP1
 208  0027  0F00     R                  MOV     A,OFFSET POR_ID+1
 209  0028  390A                        SNZ     Z
 210  0029  0403                        XOR     A,MP1
 211  002A  390A                        SNZ     Z
 212  002B                      endif
 213  002B              CLR_RAM:        ;-CLEAR RAM
 214  002B  1F02                        CLR     IAR1
 215  002C  1603                        SIZA    MP1
 216  002D  2800     R                  JMP     CLEAR_RAM
 217  002E              
 218  002E  0003                        RET
 219  002F              
 220  002F              
 221  002F              ;;***********************************************************
 222  002F              ;;*SUB. NAME:                                               *
 223  002F              ;;*INPUT    :                                               *
 224  002F              ;;*OUTPUT   :                                               *
 225  002F              ;;*USED REG.:                                               *
 226  002F              ;;*FUNCTION :                                               *
 227  002F              ;;***********************************************************
 228  002F              _LOAD_TKS_GLOBE_VARIES:
 229  002F              _LOAD_HXT_REFERENCE:
 230  002F                              ;------------------------
 231  002F                              ;-SET TKS LIBRARY OPTION-
 232  002F                              ;------------------------
 233  002F  0F70                        MOV     A,GlobeOptionA
 234  0030  0080     E                  MOV     _GLOBE_VARIES[0],A
 235  0031  0FF0                        MOV     A,GlobeOptionB
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次34

 236  0032  0080     E                  MOV     _GLOBE_VARIES[1],A
 237  0033  0F88                        MOV     A,GlobeOptionC
 238  0034  0080     E                  MOV     _GLOBE_VARIES[2],A
 239  0035              
 240  0035                              ;--------------------------
 241  0035                              ;-SET TOUCH OR IO ATTRIBUTE
 242  0035                              ;--------------------------
 243  0035  0FFF                        MOV     A,IO_TOUCH_ATTR&0FFH
 244  0036  0080     E                  MOV     _KEY_IO_SEL[0],A
 245  0037                              ;-IF OVER 2 TOUCH IP (8~16KEY)
 246  0037                              if      TouchKeyAmount > 8
 247  0037                              MOV     A,(IO_TOUCH_ATTR>>8)&0FFH
 248  0037                              MOV     _KEY_IO_SEL[1],A
 249  0037                              endif
 250  0037                              ;-IF OVER 4 TOUCH IP (17~24KEY)
 251  0037                              if      TouchKeyAmount > 16
 252  0037                              MOV     A,(IO_TOUCH_ATTR>>16)&0FFH
 253  0037                              MOV     _KEY_IO_SEL[2],A
 254  0037                              endif
 255  0037                              ;-IF OVER 6 TOUCH IP (25~32KEY)
 256  0037                              if      TouchKeyAmount > 24
 257  0037                              MOV     A,(IO_TOUCH_ATTR>>24)&0FFH
 258  0037                              MOV     _KEY_IO_SEL[3],A
 259  0037                              endif
 260  0037              
 261  0037                              ;------------------------
 262  0037                              ;-SET TOUCH KEY THRESHOLD
 263  0037                              ;------------------------
 264  0037                              ;-KEY1 THRESHOLD
 265  0037  0F10                        MOV     A,Key1Threshold
 266  0038  0080     E                  MOV     _GLOBE_VARIES[3],A
 267  0039              
 268  0039                              if      TouchKeyAmount > 1
 269  0039                              ;-KEY2 THRESHOLD
 270  0039  0F10                        MOV     A,Key2Threshold
 271  003A  0080     E                  MOV     _GLOBE_VARIES[4],A
 272  003B                              endif
 273  003B              
 274  003B                              if      TouchKeyAmount > 2
 275  003B                              ;-KEY3 THRESHOLD
 276  003B  0F10                        MOV     A,Key3Threshold
 277  003C  0080     E                  MOV     _GLOBE_VARIES[5],A
 278  003D                              endif
 279  003D              
 280  003D                              if      TouchKeyAmount > 3
 281  003D                              ;-KEY4 THRESHOLD
 282  003D  0F10                        MOV     A,Key4Threshold
 283  003E  0080     E                  MOV     _GLOBE_VARIES[6],A
 284  003F                              endif
 285  003F              
 286  003F                              if      TouchKeyAmount > 4
 287  003F                              ;-KEY5 THRESHOLD
 288  003F  0F10                        MOV     A,Key5Threshold
 289  0040  0080     E                  MOV     _GLOBE_VARIES[7],A
 290  0041                              endif
 291  0041              
 292  0041                              if      TouchKeyAmount > 5
 293  0041                              ;-KEY6 THRESHOLD
 294  0041  0F10                        MOV     A,Key6Threshold
 295  0042  0080     E                  MOV     _GLOBE_VARIES[8],A
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次35

 296  0043                              endif
 297  0043              
 298  0043                              if      TouchKeyAmount > 6
 299  0043                              ;-KEY7 THRESHOLD
 300  0043  0F10                        MOV     A,Key7Threshold
 301  0044  0080     E                  MOV     _GLOBE_VARIES[9],A
 302  0045                              endif
 303  0045              
 304  0045                              if      TouchKeyAmount > 7
 305  0045                              ;-KEY8 THRESHOLD
 306  0045  0F10                        MOV     A,Key8Threshold
 307  0046  0080     E                  MOV     _GLOBE_VARIES[10],A
 308  0047                              endif
 309  0047              
 310  0047                              if     TouchKeyAmount > 8
 311  0047                              ;-KEY9 THRESHOLD
 312  0047                              MOV     A,Key9Threshold
 313  0047                              MOV     _GLOBE_VARIES[11],A
 314  0047                              endif
 315  0047              
 316  0047                              if      TouchKeyAmount > 9
 317  0047                              ;-KEY10 THRESHOLD
 318  0047                              MOV     A,Key10Threshold
 319  0047                              MOV     _GLOBE_VARIES[12],A
 320  0047                              endif
 321  0047              
 322  0047                              if      TouchKeyAmount > 10
 323  0047                              ;-KEY11 THRESHOLD
 324  0047                              MOV     A,Key11Threshold
 325  0047                              MOV     _GLOBE_VARIES[13],A
 326  0047                              endif
 327  0047              
 328  0047                              if      TouchKeyAmount > 11
 329  0047                              ;-KEY12 THRESHOLD
 330  0047                              MOV     A,Key12Threshold
 331  0047                              MOV     _GLOBE_VARIES[14],A
 332  0047                              endif
 333  0047              
 334  0047                              if      TouchKeyAmount > 12
 335  0047                              ;-KEY13 THRESHOLD
 336  0047                              MOV     A,Key13Threshold
 337  0047                              MOV     _GLOBE_VARIES[15],A
 338  0047                              endif
 339  0047              
 340  0047                              if      TouchKeyAmount > 13
 341  0047                              ;-KEY14 THRESHOLD
 342  0047                              MOV     A,Key14Threshold
 343  0047                              MOV     _GLOBE_VARIES[16],A
 344  0047                              endif
 345  0047              
 346  0047                              if      TouchKeyAmount > 14
 347  0047                              ;-KEY15 THRESHOLD
 348  0047                              MOV     A,Key15Threshold
 349  0047                              MOV     _GLOBE_VARIES[17],A
 350  0047                              endif
 351  0047              
 352  0047                              if      TouchKeyAmount > 15
 353  0047                              ;-KEY16 THRESHOLD
 354  0047                              MOV     A,Key16Threshold
 355  0047                              MOV     _GLOBE_VARIES[18],A
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次36

 356  0047                              endif
 357  0047              
 358  0047                              if      TouchKeyAmount > 16
 359  0047                              ;-KEY17 THRESHOLD
 360  0047                              MOV     A,Key17Threshold
 361  0047                              MOV     _GLOBE_VARIES[19],A
 362  0047                              endif
 363  0047              
 364  0047                              if      TouchKeyAmount > 17
 365  0047                              ;-KEY18 THRESHOLD
 366  0047                              MOV     A,Key18Threshold
 367  0047                              MOV     _GLOBE_VARIES[20],A
 368  0047                              endif
 369  0047              
 370  0047                              if      TouchKeyAmount > 18
 371  0047                              ;-KEY19 THRESHOLD
 372  0047                              MOV     A,Key19Threshold
 373  0047                              MOV     _GLOBE_VARIES[21],A
 374  0047                              endif
 375  0047              
 376  0047                              if      TouchKeyAmount > 19
 377  0047                              ;-KEY20 THRESHOLD
 378  0047                              MOV     A,Key20Threshold
 379  0047                              MOV     _GLOBE_VARIES[22],A
 380  0047                              endif
 381  0047              
 382  0047                              if      TouchKeyAmount > 20
 383  0047                              ;-KEY17 THRESHOLD
 384  0047                              MOV     A,Key21Threshold
 385  0047                              MOV     _GLOBE_VARIES[23],A
 386  0047                              endif
 387  0047              
 388  0047                              if      TouchKeyAmount > 21
 389  0047                              ;-KEY18 THRESHOLD
 390  0047                              MOV     A,Key22Threshold
 391  0047                              MOV     _GLOBE_VARIES[24],A
 392  0047                              endif
 393  0047              
 394  0047                              if      TouchKeyAmount > 22
 395  0047                              ;-KEY19 THRESHOLD
 396  0047                              MOV     A,Key23Threshold
 397  0047                              MOV     _GLOBE_VARIES[25],A
 398  0047                              endif
 399  0047              
 400  0047                              if      TouchKeyAmount > 23
 401  0047                              ;-KEY20 THRESHOLD
 402  0047                              MOV     A,Key24Threshold
 403  0047                              MOV     _GLOBE_VARIES[26],A
 404  0047                              endif
 405  0047              
 406  0047                              if      TouchKeyAmount > 24
 407  0047                              ;-KEY17 THRESHOLD
 408  0047                              MOV     A,Key25Threshold
 409  0047                              MOV     _GLOBE_VARIES[27],A
 410  0047                              endif
 411  0047              
 412  0047                              if      TouchKeyAmount > 25
 413  0047                              ;-KEY18 THRESHOLD
 414  0047                              MOV     A,Key26Threshold
 415  0047                              MOV     _GLOBE_VARIES[28],A
文件：MAIN_PROGRAM_V102.asm 编译器版本 2.93 页次37

 416  0047                              endif
 417  0047              
 418  0047                              if      TouchKeyAmount > 26
 419  0047                              ;-KEY19 THRESHOLD
 420  0047                              MOV     A,Key27Threshold
 421  0047                              MOV     _GLOBE_VARIES[29],A
 422  0047                              endif
 423  0047              
 424  0047                              if      TouchKeyAmount > 27
 425  0047                              ;-KEY20 THRESHOLD
 426  0047                              MOV     A,Key28Threshold
 427  0047                              MOV     _GLOBE_VARIES[30],A
 428  0047                              endif
 429  0047              
 430  0047                              if      TouchKeyAmount > 28
 431  0047                              ;-KEY29 THRESHOLD
 432  0047                              MOV     A,Key29Threshold
 433  0047                              MOV     _GLOBE_VARIES[31],A
 434  0047                              endif
 435  0047              
 436  0047                              if      TouchKeyAmount > 29
 437  0047                              ;-KEY30 THRESHOLD
 438  0047                              MOV     A,Key30Threshold
 439  0047                              MOV     _GLOBE_VARIES[32],A
 440  0047                              endif
 441  0047              
 442  0047                              if      TouchKeyAmount > 30
 443  0047                              ;-KEY31 THRESHOLD
 444  0047                              MOV     A,Key31Threshold
 445  0047                              MOV     _GLOBE_VARIES[33],A
 446  0047                              endif
 447  0047              
 448  0047                              if      TouchKeyAmount > 31
 449  0047                              ;-KEY32 THRESHOLD
 450  0047                              MOV     A,Key32Threshold
 451  0047                              MOV     _GLOBE_VARIES[34],A
 452  0047                              endif
 453  0047              
 454  0047              
 455  0047  0003                        RET
 456  0048              
 457  0048              
 458  0048              
 459  0048              
 460  0048                              END


        0 Errors, 0 Warnings